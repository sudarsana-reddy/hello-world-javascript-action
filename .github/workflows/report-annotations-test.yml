name: report-annotations-test

on:  
  workflow_dispatch:  
  push:
    paths:
      - 'custom-actions/report-annotations/**'
      - '.github/workflows/report-annotations-test.yml' 


jobs:
  report-annotations-test:
    runs-on: ubuntu-latest
    steps:   
      - name: Checkout
        uses: actions/checkout@v3
      - name: Add annotations to report
        uses: ./custom-actions/report-annotations
        with:
          FILE_NAME: "${{ github.workspace }}/test.txt"

      - name: Upload
        uses: actions/upload-artifact@v3
        with:
          name: annotations
          path: "${{ github.workspace }}/test.txt"

  download-and-print-test:
    runs-on: ubuntu-latest
    needs: report-annotations-test
    steps:   
      - name: Download test file
        uses: actions/download-artifact@v3
        with:
          name: annotations
          
      - name: Print the contents
        run: |
          cat test.txt

